<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Maja üíñ</title>

  <style>
    :root{
      --card-bg: rgba(255,255,255,0.15);
      --shadow: 0 20px 40px rgba(0,0,0,0.30);
      --radius: 25px;
    }

    body{
      margin:0;
      min-height:100svh;
      display:grid;
      place-items:center;
      font-family: Arial, sans-serif;
      color:#fff;
      text-align:center;

      background:
        linear-gradient(135deg, #de95f0, #ffffff),
        url("https://www.transparenttextures.com/patterns/asfalt-light.png");
      background-blend-mode: overlay;

      overflow:hidden;
      padding:16px;
      box-sizing:border-box;
    }

    .card{
      width:min(460px, 100%);
      background:var(--card-bg);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:28px 18px;
      box-sizing:border-box;
      position:relative;
    }

    h1{
      margin:0 0 10px;
      font-size: clamp(22px, 4.8vw, 32px);
      line-height:1.2;
    }

    .gif{
      width:min(260px, 78vw);
      height:auto;
      display:block;
      margin:16px auto 18px;
      border-radius:16px;
      box-shadow: 0 14px 28px rgba(0,0,0,0.25);
    }

    .buttons{
      display:flex;
      justify-content:center;
      gap:12px;
      flex-wrap:nowrap;    
      align-items:center;
    }

    button{
      font-size:18px;
      padding:12px 22px;
      border:0;
      border-radius:30px;
      cursor:pointer;
      user-select:none;
      touch-action: manipulation;
      min-width:130px;
      white-space:nowrap;

      position: relative;
      overflow: hidden;              
      will-change: transform;
      box-shadow: 0 10px 20px rgba(0,0,0,0.22);
      transition:
        transform 140ms ease,
        filter 140ms ease,
        box-shadow 180ms ease,
        left 220ms cubic-bezier(.2,.9,.2,1),
        top  220ms cubic-bezier(.2,.9,.2,1);
    }

    button:hover{
      transform: translateY(-2px) scale(1.03);
      filter: brightness(1.06);
      box-shadow: 0 16px 34px rgba(0,0,0,0.26);
    }

    button:active{
      transform: translateY(1px) scale(0.97);
      filter: brightness(0.98);
      box-shadow: 0 8px 16px rgba(0,0,0,0.20);
    }

    button:focus-visible{
      outline: 3px solid rgba(255,255,255,0.75);
      outline-offset: 3px;
    }

    button:disabled{
      opacity:0.75;
      cursor:default;
      pointer-events:none;
    }

    .yes{ background:#2ecc71; color:#fff; }
    .no { background:#e74c3c; color:#fff; }

    .ghost{
      opacity:0;
      pointer-events:none;
    }

    @keyframes jelly {
      0%   { transform: scale(1); }
      35%  { transform: scale(0.92, 1.08); }
      60%  { transform: scale(1.06, 0.94); }
      100% { transform: scale(1); }
    }
    .jelly{
      animation: jelly 380ms ease;
    }

    @keyframes wiggle {
      0%   { transform: rotate(0)   scale(1); }
      30%  { transform: rotate(-6deg) scale(1.02); }
      60%  { transform: rotate( 6deg) scale(1.02); }
      100% { transform: rotate(0)   scale(1); }
    }
    .wiggle{
      animation: wiggle 220ms ease;
    }

    .ripple{
      position:absolute;
      border-radius:999px;
      transform: translate(-50%, -50%) scale(0);
      background: rgba(255,255,255,0.55);
      pointer-events:none;
      animation: ripple 520ms ease-out forwards;
      mix-blend-mode: overlay;
    }
    @keyframes ripple{
      to{
        transform: translate(-50%, -50%) scale(2.6);
        opacity: 0;
      }
    }

    @media (max-width: 360px){
      button{ font-size:16px; padding:10px 16px; min-width:110px; }
      .buttons{ gap:10px; }
    }

    @media (prefers-reduced-motion: reduce){
      button{ transition:none; }
      button:hover, button:active{ transform:none; }
      .jelly, .wiggle{ animation:none; }
      .ripple{ animation:none; display:none; }
    }

    .result{
      display:grid;
      gap:12px;
      justify-items:center;
      padding:24px 16px;
      text-align:center;
    }
    .result h1{
      margin:0;
      font-size: clamp(26px, 6vw, 42px);
    }
    .result img{
      width:min(300px, 85vw);
      border-radius:16px;
      box-shadow: var(--shadow);
    }
  </style>
</head>

<body>
  <div class="card" id="card">
    <h1>Czy zostaniesz mojƒÖ WalentynkƒÖ? üíò</h1>

    <img class="gif"
      src="https://media.giphy.com/media/l0MYt5jPR6QX5pnqM/giphy.gif"
      alt="serduszka">

    <div class="buttons" id="btnRow">
      <button class="yes" id="yesBtn" type="button">TAK üíñ</button>
      <button class="no" id="noBtn" type="button">NIE üò≥</button>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const yesBtn = document.getElementById("yesBtn");
      const noBtn  = document.getElementById("noBtn");

      let detached = false;    
      let ghostBtn = null;     

      function showYes(){
        document.body.innerHTML = `
          <div class="result">
            <h1>Wiedzia≈Çem üòçüíê</h1>
            <img src="https://media.giphy.com/media/26BRv0ThflsHCqDrG/giphy.gif" alt="yay">
          </div>
        `;
      }

      function playAnim(el, className, durationMs){
        el.classList.remove(className);
        void el.offsetWidth;
        el.classList.add(className);
        window.setTimeout(() => el.classList.remove(className), durationMs);
      }

      function addRipple(e, btn){
        btn.querySelectorAll(".ripple").forEach(r => r.remove());

        const rect = btn.getBoundingClientRect();
        const size = Math.max(rect.width, rect.height) * 1.2;

        const ripple = document.createElement("span");
        ripple.className = "ripple";
        ripple.style.width  = size + "px";
        ripple.style.height = size + "px";

        const x = (e && typeof e.clientX === "number") ? (e.clientX - rect.left) : rect.width / 2;
        const y = (e && typeof e.clientY === "number") ? (e.clientY - rect.top)  : rect.height / 2;

        ripple.style.left = x + "px";
        ripple.style.top  = y + "px";

        btn.appendChild(ripple);
        ripple.addEventListener("animationend", () => ripple.remove(), { once: true });
      }

      function detachNoIfNeeded(){
        if (detached) return;

        ghostBtn = noBtn.cloneNode(true);
        ghostBtn.classList.add("ghost");
        ghostBtn.setAttribute("aria-hidden", "true");
        ghostBtn.tabIndex = -1;

        const rect = noBtn.getBoundingClientRect();
        noBtn.replaceWith(ghostBtn);
        document.body.appendChild(noBtn);

        noBtn.style.position = "fixed";
        noBtn.style.zIndex = "9999";
        noBtn.style.left = rect.left + "px";
        noBtn.style.top  = rect.top  + "px";

        detached = true;
      }

      function moveNo(){
        detachNoIfNeeded();

        const margin = 12;
        const w = document.documentElement.clientWidth;
        const h = document.documentElement.clientHeight;

        const maxX = Math.max(margin, w - noBtn.offsetWidth  - margin);
        const maxY = Math.max(margin, h - noBtn.offsetHeight - margin);

        const x = Math.floor(margin + Math.random() * (maxX - margin + 1));
        const y = Math.floor(margin + Math.random() * (maxY - margin + 1));

        noBtn.style.left = x + "px";
        noBtn.style.top  = y + "px";
      }

      yesBtn.addEventListener("pointerdown", (e) => addRipple(e, yesBtn));
      noBtn.addEventListener("pointerdown",  (e) => addRipple(e, noBtn));

      yesBtn.addEventListener("click", () => {
        playAnim(yesBtn, "jelly", 380);
        yesBtn.disabled = true;
        window.setTimeout(showYes, 320);
      });

      noBtn.addEventListener("pointerdown", (e) => {
        e.preventDefault();
        playAnim(noBtn, "wiggle", 220);
        window.setTimeout(moveNo, 60);
      });

      noBtn.addEventListener("mouseenter", () => {
        moveNo();
      });

      window.addEventListener("resize", () => {
        if (detached) moveNo();
      });
    });
  </script>
</body>
</html>
